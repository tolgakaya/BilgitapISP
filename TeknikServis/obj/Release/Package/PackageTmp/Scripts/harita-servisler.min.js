function GetAllMusteris(){var n=new google.maps.Geocoder;return $.ajax({type:"GET",url:"/api/Musteriservis/",contentType:"json",dataType:"json",success:function(t){$.each(t,function(t,i){var l=JSON.stringify(i),r=$.parseJSON(l),o=r.servis_id,u=r.musteri_id,s=r.musteri_adi,f=r.center_Lat,h=r.center_Long,e=r.musteri_adres,c=r.kimlik;f?musteriler[u]={center:new google.maps.LatLng(f,h),adi:s,musteri_id:u,musteri_adres:e,lat:f,lng:h,servis_id:o,kimlik:c}:n.geocode({address:e},function(n,t){t==google.maps.GeocoderStatus.OK?musteriler[u]={center:new google.maps.LatLng(n[0].geometry.location.lat(),n[0].geometry.location.lng()),adi:s,musteri_id:u,musteri_adres:e,lat:n[0].geometry.location.lat(),lng:n[0].geometry.location.lng(),servis_id:o,kimlik:c}:console.log("Geocode error: "+t)})})},error:function(n){console.log(n)}}),musteriler}function createMarkerM(n,t){var u=t,i=new google.maps.InfoWindow({size:new google.maps.Size(150,50)}),r=new google.maps.Marker({position:n,map:map,icon:"/img/musteri.png",animation:google.maps.Animation.DROP,zIndex:Math.round(n.lat()*-1e5)<<5});i.setContent(u);i.open(map,r);bounds.extend(n);google.maps.event.addListener(r,"click",function(){panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:n,pov:{heading:34,pitch:10}});map.setStreetView(panorama)})}function initializeMusteriler(){var t={zoom:10,center:new google.maps.LatLng(-33.9,151.2),mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},n;map=new google.maps.Map(document.getElementById("map_canvas"),t);bounds=new google.maps.LatLngBounds;for(n in musteriler)createMarkerM(musteriListesi[n].center,"<div class='panel panel-primary'><div class='panel-heading'>"+musteriListesi[n].adi+"<\/div><div class='panel-body'><div class='table-responsive'><div class='btn btn-xs-group'><a href='javascript:map.setCenter(new google.maps.LatLng("+musteriListesi[n].center.toUrlValue(6)+"));map.setZoom(20);'><i class='btn btn-xs btn-success '>Yaklaş<\/i><\/a> <a href='javascript:map.fitBounds(bounds);'><i class='btn btn-xs btn-danger'>Uzaklaş<\/i><\/a><a href='../MusteriDetayBilgileri.aspx?custID="+musteriListesi[n].musteri_id+"'><i class='btn btn-xs btn-primary btn-block'>Müşteri Detay<\/i> <\/a><a href='MusteriYolu.aspx?id="+musteriListesi[n].musteri_id+"'><i class='btn btn-xs btn-info btn-block'>Navigasyon<\/i> <\/a><a href='/TeknikTeknik/Servis.aspx?servisid="+musteriListesi[n].servis_id+"&custid="+musteriListesi[n].musteri_id+"&kimlik="+musteriListesi[n].kimlik+"'><i class='btn btn-xs btn-info btn-block'>Servis Detayı<\/i> <\/a><\/div><\/div><\/div> <\/div>"),document.getElementById("txtNoktalar").value+=musteriListesi[n].musteri_id+"-"+musteriListesi[n].lat+"-"+musteriListesi[n].lng+",";map.fitBounds(bounds)}var musteriler={},map=null,bounds=null,panorama,musteriListesi=GetAllMusteris();
//# sourceMappingURL=harita-servisler.min.js.map
