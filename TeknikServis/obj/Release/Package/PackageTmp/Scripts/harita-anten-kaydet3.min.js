function createIcons(){var n,t;for(icons=Array(),n=65;n<68;n++)t=new google.maps.MarkerImage("http://www.google.com/intl/en_ALL/mapfiles/marker_green"+String.fromCharCode(n)+".png"),icons.push(t)}function drawArc(n,t,i,r){var s=Math.PI/180,h=180/Math.PI,o=32,c=r/EarthRadiusMeters*h,l=c/Math.cos(n.lat()*s),u=[],f,e;for(t>i&&(i+=360),f=i-t,f=f/o,e=0;e<o+1;e++)u.push(n.DestinationPoint(t+e*f,r)),bounds.extend(u[u.length-1]);return u}function doLoad(){var n=new google.maps.LatLng(36.077806,32.826344),t={zoom:zoom,center:n,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId.satellite};mapCanvas=new google.maps.Map(document.getElementById("map_canvas"),t);ortaCizgi=new google.maps.Polyline({path:[n,n],strokeColor:"#F00000",strokeOpacity:1,strokeWeight:10,map:mapCanvas});ucgen=new google.maps.Polyline({path:[n,n],strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:10,map:mapCanvas});bounds=new google.maps.LatLngBounds;bearingLabelDiv=document.createElement("div");bearingLabelDiv.style.padding=1;bearingLabelDiv.style.backgroundColor="#EEE";bearingLabelDiv.style.borderColor="#aaa";bearingLabelDiv.style.fontSize="1.5em";bearingLabelDiv2=document.createElement("div");bearingLabelDiv2.style.padding=1;bearingLabelDiv2.style.backgroundColor="#EEE";bearingLabelDiv2.style.borderColor="#aaa";bearingLabelDiv2.style.fontSize="1.5em";labelmesafeC=document.createElement("div");labelmesafeC.style.padding=1;labelmesafeC.style.backgroundcolor="#EEE";labelmesafeC.style.borderColor="#aaa";labelmesafeC.style.fontSize="1.5em";labelmesafeB=document.createElement("div");labelmesafeB.style.padding=1;labelmesafeB.style.backgroundcolor="#EEE";labelmesafeB.style.borderColor="#aaa";labelmesafeB.style.fontSize="1.5em";labelAci=document.createElement("div");labelAci.id="labelAci";labelAci.style.padding=1;labelAci.style.backgroundColor="#EEE";labelAci.style.borderColor="#aaa";labelAci.style.fontSize="1.5em";txtAci=document.getElementById("txtAci");labelPozisyonA=document.getElementById("labelPozisyonA");labelPozisyonC=document.getElementById("labelPozisyonC");labelPozisyonB=document.getElementById("labelPozisyonB");mapCanvas.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(labelmesafeC);mapCanvas.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(labelmesafeB);mapCanvas.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(labelAci)}function calculateBearing(){var i=marker1.getPosition(),r=marker2.getPosition(),u=i.lat()*(Math.PI/180),f=i.lng()*(Math.PI/180),t=r.lat()*(Math.PI/180),e=r.lng()*(Math.PI/180),o=2*Math.asin(Math.sqrt(Math.pow(Math.sin((u-t)/2),2)+Math.cos(u)*Math.cos(t)*Math.pow(Math.sin((f-e)/2),2))),n=Math.atan2(Math.sin(f-e)*Math.cos(t),Math.cos(u)*Math.sin(t)-Math.sin(u)*Math.cos(t)*Math.cos(f-e))/-(Math.PI/180);n=n<0?360+n:n;n=450-n;bearingLabelDiv.innerHTML="Bearing: "+n%360;birinciBearing=n%360;labelAci.innerHTML="Anten Açısı: "+Math.round(birinciBearing-ikinciBearing);txtAci.value=Math.round(birinciBearing-ikinciBearing);labelPozisyonB.value=r;labelPozisyonA.value=i;distance=google.maps.geometry.spherical.computeDistanceBetween(i,r)/1609;metreB=1609.3*distance;labelmesafeB.innerHTML="Mesafe B :"+Math.round(metreB)+" metre";line||(line=new google.maps.Polyline({strokeColor:"#0000ff",strokeWeight:2,strokeOpacity:1,map:mapCanvas}));line.setPath([marker1.getPosition(),marker2.getPosition()])}function calculateBearing2(){var i=marker1.getPosition(),r=marker3.getPosition(),u=i.lat()*(Math.PI/180),f=i.lng()*(Math.PI/180),t=r.lat()*(Math.PI/180),e=r.lng()*(Math.PI/180),o=2*Math.asin(Math.sqrt(Math.pow(Math.sin((u-t)/2),2)+Math.cos(u)*Math.cos(t)*Math.pow(Math.sin((f-e)/2),2))),n=Math.atan2(Math.sin(f-e)*Math.cos(t),Math.cos(u)*Math.sin(t)-Math.sin(u)*Math.cos(t)*Math.cos(f-e))/-(Math.PI/180);n=n<0?360+n:n;n=450-n;bearingLabelDiv2.innerHTML="Bearing: "+n%360;ikinciBearing=n%360;labelAci.innerHTML="Anten Açısı: "+Math.round(birinciBearing-ikinciBearing);txtAci.value=Math.round(birinciBearing-ikinciBearing);labelPozisyonC.value=r;labelPozisyonA.value=i;distance=google.maps.geometry.spherical.computeDistanceBetween(i,r)/1609;metre=1609.3*distance;labelmesafeC.innerHTML="Mesafe C:"+Math.round(metre)+" metre";line2||(line2=new google.maps.Polyline({strokeColor:"#0000ff",strokeWeight:2,strokeOpacity:1,map:mapCanvas}));line2.setPath([marker1.getPosition(),marker3.getPosition()])}function calculatePoint(){var t=marker1.getPosition().lat(),u=marker1.getPosition().lng(),i=1/3963.189*(180/Math.PI),f=i/Math.cos(t*(Math.PI/180)),r=80*(Math.PI/180),e=u+f*Math.cos(r),o=t+i*Math.sin(r),n=new google.maps.LatLng(parseFloat(o,10),parseFloat(e,10));marker2=setMarker(marker2,n,"Lat: "+n.lat()+"<br>Lon: "+n.lng(),"Destination",icons[1]);calculateBearing()}function calculatePointB(n){marker2=setMarker(marker2,n.start,"Başlangıç","Başlangıç",icons[1]);calculateBearing()}function calculatePoint2(){var t=marker1.getPosition().lat(),u=marker1.getPosition().lng(),i=1/3963.189*(180/Math.PI),f=i/Math.cos(t*(Math.PI/180)),r=Math.PI/6,e=u+f*Math.cos(r),o=t+i*Math.sin(r),n=new google.maps.LatLng(parseFloat(o,10),parseFloat(e,10));marker3=setMarker(marker3,n,"Lat: "+n.lat()+"<br>Lon: "+n.lng(),"Destination",icons[2]);calculateBearing2()}function calculatePoint2C(n){var t=n.end;marker3=setMarker(marker3,t,"Lat: "+t.lat()+"<br>Lon: "+t.lng(),"Destination",icons[2]);calculateBearing2()}function setMarker(n,t,i,r,u){return n?(n.setPosition(t),n):(n=new google.maps.Marker({position:t,title:r,icon:u,draggable:!0,map:mapCanvas}),google.maps.event.addListener(n,"click",function(){infoWnd.setContent(i);infoWnd.open(mapCanvas,n);panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:t,pov:{heading:34,pitch:10}})}),google.maps.event.addListener(n,"drag",function(){calculateBearing();calculateBearing2();piePoly.setMap(null);cekim()}),n)}function GetAnten(){return $.getJSON(url,function(n){var t=n.anten_adi,i=n.center_Lat,r=n.center_Long,u=n.start_Lat,f=n.start_Long,e=n.end_Lat,o=n.end_Long;nokta={center:new google.maps.LatLng(i,r),start:new google.maps.LatLng(u,f),end:new google.maps.LatLng(e,o),adi:t}}).fail(function(){}),nokta}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function load(){var n,t;createIcons();doLoad();nokta!=null?(marker1=setMarker(marker1,nokta.center,"Center","Center",icons[0]),n=document.getElementById("txtAntenAdi"),n.value=nokta.adi,panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:nokta,pov:{heading:34,pitch:10}}),mapCanvas.setStreetView(panorama),calculatePointB(nokta),calculatePoint2C(nokta)):(marker1=setMarker(marker1,new google.maps.LatLng(36.077286,32.832889),"Center","Center",icons[0]),t=new google.maps.LatLng(36.077286,32.832889),panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:t,pov:{heading:34,pitch:10}}),mapCanvas.setStreetView(panorama),calculatePoint(),calculatePoint2());cekim();google.maps.event.addListener(ortaCizgi,"click",function(n){panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:n.latLng,pov:{heading:34,pitch:10}})})}function cekim(){var n=marker1.getPosition(),t=marker2.getPosition(),i=marker3.getPosition(),r=drawArc(n,n.Bearing(t),n.Bearing(i),n.distanceFrom(t));r.push(n);bounds.extend(n);r.push(t);piePoly=new google.maps.Polygon({paths:[r],strokeColor:"#00FF00",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:mapCanvas});ortaCizgi.setMap(null);ucgen.setMap(null);orta=google.maps.geometry.spherical.interpolate(t,i,.5);ortaCizgi=new google.maps.Polyline({path:[n,orta],strokeColor:"#F00000",strokeOpacity:1,strokeWeight:10,map:mapCanvas});google.maps.event.addListener(ortaCizgi,"click",function(n){panorama=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:n.latLng,pov:{heading:34,pitch:10}})});ucgen=new google.maps.Polyline({path:[t,i],strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:10,map:mapCanvas})}function goster(){var n=labelAci.innerHTML,t=labelPozisyonA.value,i=labelPozisyonB.value,r=labelPozisyonC.value;n<0?alert("Negatif açı seçtiniz. Pozitif açı için B ve C ikonlarını değiştiriniz."):alert(t+i+r+n)}var mapCanvas,container,zoom=15,centerPoint=new google.maps.LatLng(36.077286,32.832889),marker1,marker2,marker3,circle,line,circle2,line2,icons=Array(),infoWnd=new google.maps.InfoWindow,bearingLabelDiv,bearingLabelDiv2,labelmesafeC,labelmesafeB,labelAci,txtAci,labelPozisyonA,labelPozisyonC,labelPozisyonB,metre,metreB,birinciBearing,ikinciBearing,bounds=null,EarthRadiusMeters=6378137,infowindow,piePoly,ortaCizgi,panorama,orta,ucgen;google.maps.LatLng.prototype.DestinationPoint=function(n,t){var i=EarthRadiusMeters,n=n.toRad(),r=this.lat().toRad(),f=this.lng().toRad(),u=Math.asin(Math.sin(r)*Math.cos(t/i)+Math.cos(r)*Math.sin(t/i)*Math.cos(n)),e=f+Math.atan2(Math.sin(n)*Math.sin(t/i)*Math.cos(r),Math.cos(t/i)-Math.sin(r)*Math.sin(u));return new google.maps.LatLng(u.toDeg(),e.toDeg())};google.maps.LatLng.prototype.Bearing=function(n){var i=this,r=n;if(i.equals(r))return 0;var f=i.latRadians(),e=i.lngRadians(),u=r.latRadians(),o=r.lngRadians(),t=-Math.atan2(Math.sin(e-o)*Math.cos(u),Math.cos(f)*Math.sin(u)-Math.sin(f)*Math.cos(u)*Math.cos(e-o));return t<0&&(t+=Math.PI*2),t>Math.PI&&(t-=Math.PI*2),parseFloat(t.toDeg())};Number.prototype.toRad=function(){return this*Math.PI/180};Number.prototype.toDeg=function(){return this*180/Math.PI};Number.prototype.toBrng=function(){return(this.toDeg()+360)%360};infowindow=new google.maps.InfoWindow({size:new google.maps.Size(150,50)});var id=getParameterByName("id"),urlBase="/api/Anten/",url=urlBase+"?id="+id,nokta=GetAnten();google.maps.event.addDomListener(window,"load",load);
//# sourceMappingURL=harita-anten-kaydet3.min.js.map
